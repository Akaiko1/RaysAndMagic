# UgaTaima NPC Configuration
# 
# NPC TYPES:
# - spell_trader: Teaches spells to party members for gold
# - skill_trainer: Trains skills (already implemented in code)
# - merchant: Sells items
# - quest_giver: Gives quests
#
# PLACEMENT FORMAT:
# Use [npc:key] in map files to place NPCs
# The key corresponds to an NPC definition in this file

npcs:
  # Spell Traders - NPCs who teach spells for gold
  spell_trader_mage:
    name: "Mystic Trader Eldrich"
    type: "spell_trader"
    description: "A mysterious mage who trades arcane knowledge for gold"
    sprite: "elf_warrior"
    dialogue:
      greeting: "Greetings, traveler! I deal in magical knowledge. Choose a character and spell to learn."
      teaching: "Excellent choice! The spell has been inscribed in %s's spellbook."
      insufficient_gold: "You need %d gold to learn this spell."
      already_known: "%s already knows this spell."
      success: "The knowledge flows into %s's mind. Use it wisely!"
    
    # Spells this NPC can teach
    spells:
      walk_on_water:
        name: "Walk on Water"
        school: "water"
        level: 2
        spell_points: 3
        cost: 1000
        description: "Allows the party to walk across water surfaces for a limited time"
        requirements:
          min_level: 3
          min_water_skill: 1
      
      water_breathing:
        name: "Water Breathing"
        school: "water" 
        level: 3
        spell_points: 4
        cost: 1500
        description: "Allows underwater exploration for extended periods"
        requirements:
          min_level: 5
          min_water_skill: 2

  # Spell trader for testing
  mtrader0:
    name: "Mystic Trader Aldric"
    type: "spell_trader"
    description: "A wise old mage who trades in magical knowledge"
    sprite: "human"
    dialogue:
      greeting: "Greetings, traveler! I possess ancient spells for those with coin."
      teaching: "Choose your student and the spell you wish to learn."
      insufficient_gold: "You lack the gold required for this knowledge."
      already_known: "This character already knows that spell."
      success: "The magical knowledge has been imparted. Use it wisely!"
    spells:
      walk_on_water:
        name: "Walk on Water"
        school: "water"
        level: 1
        spell_points: 5
        cost: 1000
        description: "Allows the caster to walk on water surfaces for a limited time."
        requirements:
          min_level: 3
          min_magic_level: 1

  # Example of other NPC types for future expansion
  merchant_general:
    name: "Trader Marcus"
    type: "merchant"
    description: "A general goods merchant with basic supplies"
    sprite: "elf"
    dialogue:
      greeting: "Welcome to my shop! What can I get for you today?"
    inventory:
      - type: "potion"
        name: "Health Potion"
        cost: 50
        quantity: 10
      - type: "weapon"
        name: "Iron Sword"
        cost: 200
        quantity: 3

  desert_merchant:
    name: "Sahim the Wayfarer"
    type: "merchant"
    description: "A desert trader with a keen eye for useful gear"
    sprite: "merchant"
    dialogue:
      greeting: "Spare tools and trinkets? I pay fair coin."

  quest_elder:
    name: "Village Elder Aldwin"
    type: "quest_giver"
    description: "The wise village elder with knowledge of ancient secrets"
    sprite: "elf_warrior"
    dialogue:
      greeting: "Young adventurer, I have a task that requires your skills..."
    quests:
      - id: "ancient_artifact"
        name: "Retrieve the Ancient Artifact"
        description: "Find the lost artifact hidden deep in the forest"
        reward_gold: 500
        reward_experience: 1000

  shipwreck_bandit_camp:
    name: "Abandoned Shipwreck"
    type: "encounter"
    description: "An old shipwreck that appears abandoned, but sounds come from within"
    sprite: "shipwreck"
    render_type: "environment_sprite"
    transparent: true
    dialogue:
      greeting: "You approach an old shipwreck half-buried in the ground. Through gaps in the rotted hull, you hear voices and see flickering firelight. It seems bandits have made this wreck their hideout."
      choice_prompt: "What do you want to do?"
      choices:
        - text: "Leave quietly"
          action: "leave"
        - text: "Attack the bandits"
          action: "combat"
    encounter:
      type: "bandit_camp"
      monsters:
        - type: "bandit"
          count_min: 2
          count_max: 5
      rewards:
        gold: 2000
        experience: 500
      first_visit_only: true

# NPC Placement Rules
placement_rules:
  spell_trader:
    preferred_tiles: ["clearing", "ancient_tree", "spawn"]
    avoid_tiles: ["water", "thicket", "wall"]
    min_distance_from_monsters: 3.0
    min_distance_from_other_npcs: 5.0
  
  merchant:
    preferred_tiles: ["clearing", "spawn", "empty"]
    avoid_tiles: ["water", "thicket", "moss_rock"]
    min_distance_from_monsters: 2.0
    min_distance_from_other_npcs: 3.0
  
  quest_giver:
    preferred_tiles: ["ancient_tree", "clearing", "spawn"]
    avoid_tiles: ["water", "thicket", "wall"]
    min_distance_from_monsters: 4.0
    min_distance_from_other_npcs: 6.0
  
  encounter:
    preferred_tiles: ["clearing", "fern_patch", "empty"]
    avoid_tiles: ["water", "deep_water", "wall", "tree", "ancient_tree"]
    min_distance_from_monsters: 2.0
    min_distance_from_other_npcs: 8.0
